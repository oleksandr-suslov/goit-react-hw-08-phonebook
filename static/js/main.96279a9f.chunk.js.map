{"version":3,"sources":["components/AuthNav/AuthNav.module.css","components/App/App.module.css","components/Section/Section.jsx","redux/phonebook/phonebookActions.js","components/AuthNav/AuthNav.jsx","components/Section/Section.module.css","redux/auth/authReducer.js","redux/phonebook/phonebookReducer.js","redux/store.js","components/UserMenu/UserMenu.jsx","components/Nav/Nav.jsx","components/PublicRoute/PublicRoute.jsx","components/PrivateRoute/PrivateRoute.jsx","components/App/App.jsx","index.js","redux/auth/authSelector.js","redux/phonebook/phonebookOperations.js","services/api-request.js","components/Nav/Nav.module.css","redux/auth/authOperations.js","components/UserMenu/UserMenu.module.css"],"names":["module","exports","Section","children","className","styles","mainSection","filterContact","createAction","AuthNav","to","link","registerNewUser","createReducer","register","fulfilled","_","payload","user","logIn","logOut","getCurrent","token","error","rejected","pending","action","isLoggedIn","isUser","state","combineReducers","getContacts","fetchContacts","addContacts","removeContact","filter","el","id","contacts","authPersistConfig","key","storage","whitelist","persistedReducer","persistReducer","authReducer","store","configureStore","reducer","auth","contactsReduser","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","UserMenu","dispatch","useDispatch","email","useSelector","getUserEmail","userMenu","text","mail","Button","variant","type","onClick","Nav","getIsLoggedIn","wrapper","Box","sx","flexGrow","AppBar","position","Toolbar","nav","exact","activeClassName","PublicRoute","restricted","redirectTo","props","PrivateRoute","HomePage","lazy","AuthPage","LoginPage","ContactsPage","App","getCurrentUser","useEffect","sectionApp","fallback","color","height","width","path","footer","Copyright","ReactDOM","render","StrictMode","loading","document","getElementById","createAsyncThunk","a","rejectWithValue","console","message","newObject","addContactRequest","deleteContactRequest","axios","defaults","baseURL","headers","common","Authorization","get","data","newContact","post","delete","userData","loginUser","logOutUser","persistedToken","newUser","thunkAPI","getState"],"mappings":"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","file":"static/js/main.96279a9f.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__qMMtQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2aeWO\",\"footer\":\"App_footer__1VNiO\"};","import styles from \"./Section.module.css\";\r\n\r\nexport default function Section({ children, className }) {\r\n  return (\r\n    <section className={styles.mainSection + \" \" + className}>\r\n      {children}\r\n    </section>\r\n  );\r\n}\r\n","import { createAction } from \"@reduxjs/toolkit\";\n\nconst filterContact = createAction(\"contact/Filter\");\nexport { filterContact };\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./AuthNav.module.css\";\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink to=\"/login\" className={styles.link}>\r\n        LogIn\r\n      </NavLink>\r\n      <NavLink to=\"/register\" className={styles.link}>\r\n        SignUp\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainSection\":\"Section_mainSection__2s6RO\"};","import { createReducer } from \"@reduxjs/toolkit\";\nimport { combineReducers } from \"redux\";\nimport { register, logIn, logOut, getCurrent } from \"./authOperations\";\n\nconst registerNewUser = createReducer(null, {\n  [register.fulfilled]: (_, { payload }) => payload.user,\n  [logIn.fulfilled]: (_, { payload }) => payload.user,\n  [logOut.fulfilled]: () => null,\n  [getCurrent.fulfilled]: (_, { payload }) => payload.user,\n  [getCurrent.fulfilled]: (_, { payload }) => payload,\n});\n\nconst token = createReducer(null, {\n  [register.fulfilled]: (_, { payload }) => payload.token,\n  [logIn.fulfilled]: (_, { payload }) => payload.token,\n  [logOut.fulfilled]: () => null,\n});\n\nconst error = createReducer(null, {\n  [register.rejected]: (_, { payload }) => payload,\n  [register.pending]: () => null,\n  [logIn.rejected]: (_, { payload }) => payload,\n  [logIn.pending]: () => null,\n  [logOut.rejected]: (_, action) => action.payload,\n  [logOut.pending]: () => null,\n  [getCurrent.rejected]: (_, action) => action.payload,\n  [getCurrent.pending]: () => null,\n});\n\nconst isLoggedIn = createReducer(false, {\n  [register.fulfilled]: () => true,\n  [logIn.fulfilled]: () => true,\n  [logOut.fulfilled]: () => false,\n  [getCurrent.fulfilled]: () => true,\n});\n\nconst isUser = createReducer(false, {\n  [getCurrent.fulfilled]: (state, _) => false,\n  [getCurrent.rejected]: (state, _) => false,\n  [getCurrent.pending]: (state, _) => true,\n});\n\nexport default combineReducers({\n  user: registerNewUser,\n  token,\n  error,\n  isLoggedIn,\n  isUser,\n});\n","import { createReducer } from \"@reduxjs/toolkit\";\nimport { combineReducers } from \"redux\";\nimport { filterContact } from \"./phonebookActions\";\nimport {\n  fetchContacts,\n  addContacts,\n  removeContact,\n} from \"./phonebookOperations\";\n\nconst getContacts = createReducer([], {\n  [fetchContacts.fulfilled]: (state, action) => action.payload,\n  [addContacts.fulfilled]: (state, action) => [...state, action.payload],\n  [removeContact.fulfilled]: (state, action) =>\n    state.filter((el) => el.id !== action.payload),\n});\n\nconst error = createReducer(null, {\n  [fetchContacts.rejected]: (_, action) => action.payload,\n  [fetchContacts.pending]: () => null,\n  [addContacts.rejected]: (_, action) => action.payload,\n  [addContacts.pending]: () => null,\n  [removeContact.rejected]: (_, action) => action.payload,\n  [removeContact.pending]: () => null,\n});\n\nconst filter = createReducer(\"\", {\n  [filterContact]: (state, action) => action.payload,\n});\n\nexport default combineReducers({\n  contacts: getContacts,\n  filter,\n  error,\n});\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\nimport authReducer from \"./auth/authReducer\";\nimport contactsReduser from \"./phonebook/phonebookReducer\";\n\nconst authPersistConfig = {\n  key: \"auth\",\n  storage,\n  whitelist: [\"token\"],\n};\n\nconst persistedReducer = persistReducer(authPersistConfig, authReducer);\n\nconst store = configureStore({\n  reducer: {\n    auth: persistedReducer,\n    contacts: contactsReduser,\n  },\n\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n      },\n    }),\n});\n\nconst persistor = persistStore(store);\n\nexport { store, persistor };\n","import { useSelector, useDispatch } from \"react-redux\";\r\nimport { logOut } from \"../../redux/auth/authOperations\";\r\nimport { getUserEmail } from \"../../redux/auth/authSelector\";\r\nimport styles from \"./UserMenu.module.css\";\r\n\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nconst UserMenu = () => {\r\n  const dispatch = useDispatch();\r\n  const email = useSelector(getUserEmail);\r\n\r\n  return (\r\n    <div className={styles.userMenu}>\r\n      <p className={styles.text}>Welcome,</p>\r\n      <p className={styles.mail}>{email}</p>\r\n      <Button\r\n              variant=\"contained\"\r\n        type=\"button\"\r\n        onClick={() => dispatch(logOut())}\r\n      >\r\n        Exit\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserMenu;\r\n","import { useSelector } from \"react-redux\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\n\r\nimport UserMenu from \"../UserMenu/UserMenu\";\r\nimport AuthNav from \"../AuthNav/AuthNav\";\r\n\r\nimport { getIsLoggedIn } from \"../../redux/auth/authSelector\";\r\nimport styles from \"./Nav.module.css\";\r\n\r\nexport default function Nav() {\r\n  const isLoggedIn = useSelector(getIsLoggedIn);\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <Box sx={{ flexGrow: 1 }}>\r\n        <AppBar position=\"fixed\">\r\n          <Toolbar>\r\n            <nav className={styles.nav}>\r\n              <NavLink\r\n                to=\"/\"\r\n                exact\r\n                className={styles.link}\r\n                activeClassName=\"activeLink\"\r\n              >\r\n                Home\r\n              </NavLink>\r\n\r\n              {isLoggedIn && (\r\n                <NavLink\r\n                  to=\"/contacts\"\r\n                  exact\r\n                  className={styles.link}\r\n                  activeClassName=\"activeLink\"\r\n                >\r\n                  Contacts\r\n                </NavLink>\r\n              )}\r\n            </nav>\r\n            {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n          </Toolbar>\r\n        </AppBar>\r\n      </Box>\r\n    </div>\r\n  );\r\n}\r\n","import { Route, Redirect } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getIsLoggedIn } from \"../../redux/auth/authSelector\";\r\n\r\nexport default function PublicRoute({\r\n  children,\r\n  restricted = false,\r\n  redirectTo = \"/\",\r\n  ...props\r\n}) {\r\n  const isLoggedIn = useSelector(getIsLoggedIn);\r\n\r\n  return (\r\n    <Route {...props}>\r\n      {isLoggedIn && restricted ? <Redirect to={redirectTo} /> : children}\r\n    </Route>\r\n  );\r\n}\r\n","import { Route, Redirect } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { getIsLoggedIn } from \"../../redux/auth/authSelector\";\r\n\r\nexport default function PrivateRoute({\r\n  children,\r\n  redirectTo = \"/login\",\r\n  ...props\r\n}) {\r\n  const isLoggedIn = useSelector(getIsLoggedIn);\r\n\r\n  return (\r\n    <Route {...props}>\r\n      {isLoggedIn ? children : <Redirect to={redirectTo} />}\r\n    </Route>\r\n  );\r\n}\r\n","import { Switch } from \"react-router-dom\";\r\nimport { useEffect, Suspense, lazy } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Copyright } from \"@material-ui/icons\";\r\n// import { ToastContainer } from \"react-toastify\";\r\nimport Loader from \"react-loader-spinner\";\r\n\r\nimport Nav from \"../Nav/Nav\";\r\nimport Section from \"../Section/Section\";\r\nimport PublicRoute from \"../PublicRoute/PublicRoute\";\r\nimport PrivateRoute from \"../PrivateRoute/PrivateRoute\";\r\nimport {\r\n  // getIsLoggedIn,\r\n  getCurrentUser,\r\n  // getAuthError,\r\n} from \"../../redux/auth/authSelector\";\r\nimport { getCurrent } from \"../../redux/auth/authOperations\";\r\nimport styles from \"./App.module.css\";\r\n\r\nconst HomePage = lazy(() =>\r\n  import(\"../page/HomePage\" /* webpackChunkName: \"home\" */)\r\n);\r\nconst AuthPage = lazy(() =>\r\n  import(\"../page/AuthPage\" /* webpackChunkName: \"auth\" */)\r\n);\r\nconst LoginPage = lazy(() =>\r\n  import(\"../page/LoginPage\" /* webpackChunkName: \"login\" */)\r\n);\r\nconst ContactsPage = lazy(() =>\r\n  import(\"../page/ContactsPage\" /* webpackChunkName: \"contacts\" */)\r\n);\r\n\r\nexport default function App() {\r\n  // const isLoggedIn = useSelector(getIsLoggedIn);\r\n  const dispatch = useDispatch();\r\n  // const isError = useSelector(getAuthError);\r\n  const isUser = useSelector(getCurrentUser);\r\n\r\n  useEffect(() => {\r\n    dispatch(getCurrent());\r\n  }, [dispatch]);\r\n\r\n  return (\r\n    <Section className={styles.sectionApp}>\r\n      {/* <ToastContainer autoClose={2000} /> */}\r\n      <Nav />\r\n      {!isUser && (\r\n        <Suspense\r\n          fallback={\r\n            <Loader type=\"Circles\" color=\"#00BFFF\" height={80} width={80} />\r\n          }\r\n        >\r\n          <Switch>\r\n            <PublicRoute path=\"/\" exact>\r\n              <HomePage />\r\n            </PublicRoute>\r\n\r\n            <PublicRoute path=\"/register\" restricted>\r\n              <AuthPage />\r\n            </PublicRoute>\r\n\r\n            <PublicRoute path=\"/login\" restricted>\r\n              <LoginPage />\r\n            </PublicRoute>\r\n\r\n            <PrivateRoute path=\"/contacts\">\r\n              <ContactsPage />\r\n            </PrivateRoute>\r\n          </Switch>\r\n        </Suspense>\r\n      )}\r\n      <div className={styles.footer}>\r\n        <Copyright />\r\n        Created by Suslov | 2021\r\n      </div>\r\n    </Section>\r\n  );\r\n}\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { PersistGate } from \"reduxjs-toolkit-persist/integration/react\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport { Provider } from \"react-redux\";\nimport { store, persistor } from \"./redux/store\";\n\nimport App from \"./components/App/App\";\nimport \"./index.css\";\nimport \"modern-normalize/modern-normalize.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","const getIsLoggedIn = (state) => state.auth.isLoggedIn;\n\nconst getUserEmail = (state) => state.auth.user.email;\n\nconst getToken = (state) => state.auth.token;\n\nconst getAuthError = (state) => state.auth.error;\n\nconst getCurrentUser = (state) => state.auth.isUser;\n\nexport { getIsLoggedIn, getUserEmail, getToken, getAuthError, getCurrentUser };\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport {\n  getContacts,\n  addContactRequest,\n  deleteContactRequest,\n} from \"../../services/api-request\";\n\nconst fetchContacts = createAsyncThunk(\n  \"contact/fetchContacts\",\n  async function (_, { rejectWithValue }) {\n    try {\n      const contacts = await getContacts();\n      return contacts;\n    } catch (error) {\n      console.error(error.message);\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst addContacts = createAsyncThunk(\n  \"contact/add\",\n  async function (newObject, { rejectWithValue }) {\n    try {\n      const contacts = await addContactRequest(newObject);\n      return contacts;\n    } catch (error) {\n      console.error(error.message);\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst removeContact = createAsyncThunk(\n  \"contact/delete\",\n  async function (id, { rejectWithValue }) {\n    try {\n      return await deleteContactRequest(id);\n    } catch (error) {\n      console.error(error.message);\n      // console.log(error.data);\n      return rejectWithValue(error.message);\n    }\n  }\n);\nexport { fetchContacts, addContacts, removeContact };\n","import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://connections-api.herokuapp.com\";\n\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset(token) {\n    axios.defaults.headers.common.Authorization = \"\";\n  },\n};\n\nexport async function getContacts() {\n  try {\n    const { data } = await axios.get(\"/contacts\");\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function addContactRequest(newContact) {\n  try {\n    const { data } = await axios.post(\"/contacts\", newContact);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function deleteContactRequest(id) {\n  try {\n    await axios.delete(`/contacts/${id}`);\n    return id;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function registerNewUser(userData) {\n  try {\n    const { data } = await axios.post(\"/users/signup\", userData);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\nexport async function loginUser(userData) {\n  try {\n    const { data } = await axios.post(\"/users/login\", userData);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\nexport async function logOutUser() {\n  try {\n    const { data } = await axios.post(\"/users/logout\");\n    token.unset();\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport const getCurrentUser = async (persistedToken) => {\n  token.set(persistedToken);\n  try {\n    const { data } = await axios.get(\"/users/current\");\n    return data;\n  } catch (error) {\n    throw error;\n  }\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Nav_nav__3HYI7\",\"link\":\"Nav_link__1LGxt\"};","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport {\n  registerNewUser,\n  loginUser,\n  logOutUser,\n  getCurrentUser,\n} from \"../../services/api-request\";\n\nconst register = createAsyncThunk(\n  \"auth/register\",\n  async function (newUser, { rejectWithValue }) {\n    try {\n      const user = await registerNewUser(newUser);\n      return user;\n    } catch (error) {\n      console.error(error.message);\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst logIn = createAsyncThunk(\n  \"auth/login\",\n  async function (data, { rejectWithValue }) {\n    try {\n      const user = await loginUser(data);\n      return user;\n    } catch (error) {\n      console.error(error.message);\n      return rejectWithValue(error.message);\n    }\n  }\n);\nconst logOut = createAsyncThunk(\n  \"auth/logout\",\n  async function (_, { rejectWithValue }) {\n    try {\n      return await logOutUser();\n    } catch (error) {\n      console.error(error.message);\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst getCurrent = createAsyncThunk(\n  \"auth/getCurrentUser\",\n  async (_, thunkAPI) => {\n    try {\n      const state = thunkAPI.getState();\n      const token = state.auth.token;\n\n      if (!token) {\n        return thunkAPI.rejectWithValue();\n      }\n      return await getCurrentUser(token);\n    } catch (error) {\n      return error.message;\n    }\n  }\n);\n\nexport { register, logIn, logOut, getCurrent };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userMenu\":\"UserMenu_userMenu__in_tB\",\"text\":\"UserMenu_text__3uchB\",\"mail\":\"UserMenu_mail__zw92E\"};"],"sourceRoot":""}