{"version":3,"sources":["components/App/App.module.css","components/Section/Section.jsx","redux/phonebook/actions.js","redux/auth/authOperations.js","components/AuthNav/AuthNav.jsx","components/Section/Section.module.css","redux/phonebook/reducer.js","redux/auth/authReducer.js","redux/store.js","components/UserMenu/UserMenu.jsx","components/Nav/Nav.jsx","components/App/App.jsx","index.js","redux/phonebook/operations.js","services/api-request.js","redux/auth/authSelector.js","components/Nav/Nav.module.css","components/UserMenu/UserMenu.module.css","components/AuthNav/AuthNav.module.css"],"names":["module","exports","Section","children","className","styles","mainSection","filterContact","createAction","register","createAsyncThunk","newUser","a","rejectWithValue","registerNewUser","user","console","error","message","logIn","data","loginUser","logOut","_","logOutUser","AuthNav","to","link","getContacts","createReducer","fetchContacts","fulfilled","state","action","payload","addContacts","removeContact","filter","el","id","rejected","pending","combineReducers","contacts","token","isLoggedIn","authPersistConfig","key","storage","whitelist","persistedReducer","persistReducer","authReducer","store","configureStore","reducer","auth","contactsReduser","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","persistor","persistStore","UserMenu","dispatch","useDispatch","email","useSelector","getUserEmail","userMenu","text","mail","Button","variant","type","onClick","Nav","getIsLoggedIn","wrapper","Box","sx","flexGrow","AppBar","position","Toolbar","nav","exact","activeClassName","HomePage","lazy","AuthPage","LoginPage","ContactsPage","App","sectionApp","autoClose","fallback","color","height","width","path","restricted","footer","Copyright","ReactDOM","render","StrictMode","loading","document","getElementById","newObject","addContactRequest","deleteContactRequest","axios","defaults","baseURL","headers","common","Authorization","get","log","newContact","post","delete","userData"],"mappings":"mIACAA,EAAOC,QAAU,CAAC,IAAM,iBAAiB,OAAS,sB,iCCDlD,+DAEe,SAASC,EAAT,GAA2C,IAAxBC,EAAuB,EAAvBA,SAAUC,EAAa,EAAbA,UAC1C,OAAO,yBAASA,UAAWC,IAAOC,YAAc,IAAMF,EAA/C,SAA4DD,M,iCCHrE,8CAIMI,EAAgBC,YAAa,mB,kLCG7BC,EAAWC,YACf,gBAD+B,uCAE/B,WAAgBC,EAAhB,oBAAAC,EAAA,6DAA2BC,EAA3B,EAA2BA,gBAA3B,kBAEuBC,YAAgBH,GAFvC,cAEUI,EAFV,yBAKWA,GALX,uCAOIC,QAAQC,MAAM,KAAMC,SAPxB,kBAQWL,EAAgB,KAAMK,UARjC,yDAF+B,yDAe3BC,EAAQT,YACZ,aAD4B,uCAE5B,WAAgBU,EAAhB,oBAAAR,EAAA,6DAAwBC,EAAxB,EAAwBA,gBAAxB,kBAEuBQ,YAAUD,GAFjC,cAEUL,EAFV,yBAKWA,GALX,uCAOIC,QAAQC,MAAM,KAAMC,SAPxB,kBAQWL,EAAgB,KAAMK,UARjC,yDAF4B,yDAcxBI,EAASZ,YACb,cAD6B,uCAE7B,WAAgBa,EAAhB,kBAAAX,EAAA,6DAAqBC,EAArB,EAAqBA,gBAArB,kBAEiBW,cAFjB,+EAIIR,QAAQC,MAAM,KAAMC,SAJxB,kBAKWL,EAAgB,KAAMK,UALjC,yDAF6B,0D,iCCpC/B,sEAGe,SAASO,IACtB,OACE,gCACE,cAAC,IAAD,CAASC,GAAG,SAAStB,UAAWC,IAAOsB,KAAvC,mBAGA,cAAC,IAAD,CAASD,GAAG,YAAYtB,UAAWC,IAAOsB,KAA1C,yB,oBCRN3B,EAAOC,QAAU,CAAC,YAAc,+B,wLCI1B2B,EAAcC,YAAc,IAAD,mBAC9BC,IAAcC,WAAY,SAACC,EAAOC,GAAR,OAAmBA,EAAOC,WADtB,cAG9BC,IAAYJ,WAAY,SAACC,EAAOC,GAAR,4BAAuBD,GAAvB,CAA8BC,EAAOC,aAH/B,cAI9BE,IAAcL,WAAY,SAACC,EAAOC,GAAR,OACzBD,EAAMK,QAAO,SAACC,GAAD,OAAQA,EAAGC,KAAON,EAAOC,cALT,IAQ3BjB,EAAQY,YAAc,MAAD,mBACxBC,IAAcU,UAAW,SAACjB,EAAGU,GAAJ,OAAeA,EAAOC,WADvB,cAExBJ,IAAcW,SAAU,kBAAM,QAFN,cAGxBN,IAAYK,UAAW,SAACjB,EAAGU,GAAJ,OAAeA,EAAOC,WAHrB,cAIxBC,IAAYM,SAAU,kBAAM,QAJJ,cAKxBL,IAAcI,UAAW,SAACjB,EAAGU,GAAJ,OAAeA,EAAOC,WALvB,cAMxBE,IAAcK,SAAU,kBAAM,QANN,IASrBJ,EAASR,YAAc,GAAD,eACzBtB,KAAgB,SAACyB,EAAOC,GAAR,OAAmBA,EAAOC,YAG9BQ,cAAgB,CAC7BC,SAAUf,EACVS,SACApB,U,kCCzBIH,EAAkBe,YAAc,MAAD,iBAAC,EACnCpB,IAASsB,WAAY,SAACR,EAAD,YAAMW,QAAsBnB,QADf,YAAC,EAEnCI,IAAMY,WAAY,SAACR,EAAD,YAAMW,QAAsBnB,QAFZ,YAAC,EAGnCO,IAAOS,WAAY,kBAAM,QAHS,IAM/Ba,EAAQf,YAAc,MAAD,iBAAC,EACzBpB,IAASsB,WAAY,SAACR,EAAD,YAAMW,QAAsBU,SADzB,YAAC,EAEzBzB,IAAMY,WAAY,SAACR,EAAD,YAAMW,QAAsBU,SAFtB,YAAC,EAGzBtB,IAAOS,WAAY,kBAAM,QAHD,IAMrBd,EAAQY,YAAc,MAAD,mBACxBpB,IAAS+B,UAAW,SAACjB,EAAD,YAAMW,WADF,cAExBzB,IAASgC,SAAU,kBAAM,QAFD,cAGxBtB,IAAMqB,UAAW,SAACjB,EAAD,YAAMW,WAHC,cAIxBf,IAAMsB,SAAU,kBAAM,QAJE,cAKxBnB,IAAOkB,UAAW,SAACjB,EAAGU,GAAJ,OAAeA,EAAOC,WALhB,cAMxBZ,IAAOmB,SAAU,kBAAM,QANC,IASrBI,EAAahB,aAAc,GAAD,mBAC7BpB,IAASsB,WAAY,kBAAM,KADE,cAE7BZ,IAAMY,WAAY,kBAAM,KAFK,cAG7BT,IAAOS,WAAY,kBAAM,KAHI,IAMjBW,cAAgB,CAC7B3B,KAAMD,EACN8B,QACA3B,QACA4B,eCpBIC,EAAoB,CACxBC,IAAK,OACLC,YACAC,UAAW,CAAC,UAGRC,EAAmBC,YAAeL,EAAmBM,GAErDC,EAAQC,YAAe,CAC3BC,QAAS,CACPC,KAAMN,EACNP,SAAUc,GAGZC,WAAY,SAACC,GAAD,OACVA,EAAqB,CACnBC,kBAAmB,CACjBC,eAAgB,CAACC,IAAOC,IAAWC,IAAOC,IAASC,IAAOC,WAK5DC,EAAYC,YAAahB,G,+GCXhBiB,EAnBE,WACf,IAAMC,EAAWC,cACXC,EAAQC,YAAYC,KAE1B,OACE,sBAAKvE,UAAWC,IAAOuE,SAAvB,UACE,mBAAGxE,UAAWC,IAAOwE,KAArB,sBACA,mBAAGzE,UAAWC,IAAOyE,KAArB,SAA4BL,IAC5B,cAACM,EAAA,EAAD,CACQC,QAAQ,YACdC,KAAK,SACLC,QAAS,kBAAMX,EAASjD,gBAH1B,sB,6BCFS,SAAS6D,KACtB,IAAMtC,EAAa6B,YAAYU,KAC/B,OACE,qBAAKhF,UAAWC,KAAOgF,QAAvB,SACE,cAACC,EAAA,EAAD,CAAKC,GAAI,CAAEC,SAAU,GAArB,SACE,cAACC,EAAA,EAAD,CAAQC,SAAS,QAAjB,SACE,eAACC,EAAA,EAAD,WACE,sBAAKvF,UAAWC,KAAOuF,IAAvB,UACE,cAAC,IAAD,CACElE,GAAG,IACHmE,OAAK,EACLzF,UAAWC,KAAOsB,KAClBmE,gBAAgB,aAJlB,kBASCjD,GACC,cAAC,IAAD,CACEnB,GAAG,YACHmE,OAAK,EACLzF,UAAWC,KAAOsB,KAClBmE,gBAAgB,aAJlB,yBAUHjD,EAAa,cAAC,EAAD,IAAe,cAACpB,EAAA,EAAD,a,mCC3BnCsE,GAAWC,gBAAK,kBACpB,iCAEIC,GAAWD,gBAAK,kBACpB,iCAEIE,GAAYF,gBAAK,kBACrB,iCAEIG,GAAeH,gBAAK,kBACxB,iCAKa,SAASI,KAEtB,IAAMvD,EAAa6B,YAAYU,KAQ/B,OACE,eAAClF,GAAA,EAAD,CAASE,UAAWC,KAAOgG,WAA3B,UACG,cAAC,IAAD,CAAgBC,UAAW,MAC5B,cAACnB,GAAD,IAEC,qBAAK/E,UAAU,gBAAf,SACG,eAAC,WAAD,CACEmG,SACE,cAAC,IAAD,CAAQtB,KAAK,UAAUuB,MAAM,UAAUC,OAAQ,GAAIC,MAAO,KAF9D,UAKE,eAAC,IAAD,WAEE,cAAC,IAAD,CAAOC,KAAK,IAAId,OAAK,EAArB,SACE,cAACE,GAAD,MAGF,cAAC,IAAD,CAAOY,KAAK,SAASC,YAAU,EAA/B,SACE,cAACV,GAAD,MAGF,cAAC,IAAD,CAAOS,KAAK,YAAYC,YAAU,EAAlC,SACE,cAACX,GAAD,MAGF,cAAC,IAAD,CAAOU,KAAK,YAAZ,SACE,cAACR,GAAD,SAIHtD,EAAa,cAAC,IAAD,CAAUnB,GAAG,cAAiB,cAAC,IAAD,CAAUA,GAAG,WAI/D,sBAAKtB,UAAWC,KAAOwG,OAAvB,UACE,cAACC,EAAA,EAAD,IADF,iC,cC7DNC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,CAAU5D,MAAOA,EAAjB,SACE,cAAC,cAAD,CAAa6D,QAAS,KAAM9C,UAAWA,EAAvC,SACE,cAAC,IAAD,UACE,cAACgC,GAAD,YAKRe,SAASC,eAAe,U,kLCfpBtF,EAAgBpB,YACpB,wBADoC,uCAEpC,WAAgBa,EAAhB,oBAAAX,EAAA,6DAAqBC,EAArB,EAAqBA,gBAArB,kBAE2Be,cAF3B,cAEUe,EAFV,yBAGWA,GAHX,uCAKI3B,QAAQC,MAAM,KAAMC,SALxB,kBAMWL,EAAgB,KAAMK,UANjC,yDAFoC,yDAahCiB,EAAczB,YAClB,cADkC,uCAElC,WAAgB2G,EAAhB,oBAAAzG,EAAA,6DAA6BC,EAA7B,EAA6BA,gBAA7B,kBAE2ByG,YAAkBD,GAF7C,cAEU1E,EAFV,yBAGWA,GAHX,uCAKI3B,QAAQC,MAAM,KAAMC,SALxB,kBAMWL,EAAgB,KAAMK,UANjC,yDAFkC,yDAa9BkB,EAAgB1B,YACpB,iBADoC,uCAEpC,WAAgB6B,EAAhB,kBAAA3B,EAAA,6DAAsBC,EAAtB,EAAsBA,gBAAtB,kBAEiB0G,YAAqBhF,GAFtC,+EAIIvB,QAAQC,MAAM,KAAMC,SAJxB,kBAMWL,EAAgB,KAAMK,UANjC,yDAFoC,0D,yRC/BtCsG,IAAMC,SAASC,QAAU,wCAEzB,IAAM9E,EAAQ,SACRA,GACF4E,IAAMC,SAASE,QAAQC,OAAOC,cAA9B,iBAAwDjF,IAFtDA,EAAQ,SAINA,GACJ4E,IAAMC,SAASE,QAAQC,OAAOC,cAAgB,IAI3C,SAAejG,IAAtB,+B,4CAAO,8BAAAhB,EAAA,+EAEoB4G,IAAMM,IAAI,aAF9B,uBAEK1G,EAFL,EAEKA,KACRJ,QAAQ+G,IAAI,cAAe3G,GAHxB,kBAIIA,GAJJ,qG,sBAUA,SAAekG,EAAtB,kC,4CAAO,WAAiCU,GAAjC,iBAAApH,EAAA,+EAEoB4G,IAAMS,KAAK,YAAaD,GAF5C,uBAEK5G,EAFL,EAEKA,KAFL,kBAGIA,GAHJ,qG,sBASA,SAAemG,EAAtB,kC,4CAAO,WAAoChF,GAApC,SAAA3B,EAAA,+EAEG4G,IAAMU,OAAN,oBAA0B3F,IAF7B,gCAGIA,GAHJ,oG,sBASA,SAAezB,EAAtB,kC,4CAAO,WAA+BqH,GAA/B,iBAAAvH,EAAA,+EAEoB4G,IAAMS,KAAK,gBAAiBE,GAFhD,uBAEK/G,EAFL,EAEKA,KACRwB,EAAUxB,EAAKwB,OAHZ,kBAIIxB,GAJJ,qG,sBASA,SAAeC,EAAtB,kC,4CAAO,WAAyB8G,GAAzB,iBAAAvH,EAAA,+EAEoB4G,IAAMS,KAAK,eAAgBE,GAF/C,uBAEK/G,EAFL,EAEKA,KACRwB,EAAUxB,EAAKwB,OAHZ,kBAIIxB,GAJJ,qG,sBASA,SAAeI,IAAtB,+B,4CAAO,8BAAAZ,EAAA,+EAEoB4G,IAAMS,KAAK,iBAF/B,uBAEK7G,EAFL,EAEKA,KACRwB,IAHG,kBAKIxB,GALJ,qG,wDC3DP,wEAAMgE,EAAgB,SAACpD,GAAD,OAAWA,EAAMwB,KAAKX,YAEtC8B,EAAe,SAAC3C,GAAD,OAAWA,EAAMwB,KAAKzC,KAAK0D,Q,mBCDhDzE,EAAOC,QAAU,CAAC,IAAM,iBAAiB,KAAO,oB,mBCAhDD,EAAOC,QAAU,CAAC,SAAW,2BAA2B,KAAO,uBAAuB,KAAO,yB,mBCA7FD,EAAOC,QAAU,CAAC,KAAO,yB","file":"static/js/main.eb2ddb04.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__2aeWO\",\"footer\":\"App_footer__1VNiO\"};","import styles from \"./Section.module.css\";\r\n\r\nexport default function Section({ children, className }) {\r\n  return <section className={styles.mainSection + ' ' + className} >{children}</section>;\r\n}\r\n","import { createAction } from \"@reduxjs/toolkit\";\r\n\r\n// const addNewContact = createAction(\"contact/Add\");\r\n// const removeContact = createAction(\"contact/Delete\");\r\nconst filterContact = createAction(\"contact/Filter\");\r\nexport { filterContact };\r\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\nimport {\n  registerNewUser,\n  loginUser,\n  logOutUser,\n} from \"../../services/api-request\";\n\nconst register = createAsyncThunk(\n  \"auth/register\",\n  async function (newUser, { rejectWithValue }) {\n    try {\n      const user = await registerNewUser(newUser);\n      // console.log(\"newUser\", newUser);\n      // console.log(\"user\", user);\n      return user;\n    } catch (error) {\n      console.error(error.message);\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\nconst logIn = createAsyncThunk(\n  \"auth/login\",\n  async function (data, { rejectWithValue }) {\n    try {\n      const user = await loginUser(data);\n      // console.log(\"newUser\", data);\n      // console.log(\"user\", user);\n      return user;\n    } catch (error) {\n      console.error(error.message);\n      return rejectWithValue(error.message);\n    }\n  }\n);\nconst logOut = createAsyncThunk(\n  \"auth/logout\",\n  async function (_, { rejectWithValue }) {\n    try {\n      return await logOutUser();\n    } catch (error) {\n      console.error(error.message);\n      return rejectWithValue(error.message);\n    }\n  }\n);\n\n// const removeContact = createAsyncThunk(\n//   \"contact/delete\",\n//   async function (id, { rejectWithValue }) {\n//     try {\n//       return await deleteContactRequest(id);\n//     } catch (error) {\n//       console.error(error.message);\n//       // console.log(error.data);\n//       return rejectWithValue(error.message);\n//     }\n//   }\n// );\nexport { register, logIn, logOut };\n","import { NavLink } from \"react-router-dom\";\r\nimport styles from \"./AuthNav.module.css\";\r\n\r\nexport default function AuthNav() {\r\n  return (\r\n    <div>\r\n      <NavLink to=\"/login\" className={styles.link}>\r\n        LogIn\r\n      </NavLink>\r\n      <NavLink to=\"/register\" className={styles.link}>\r\n        SignUp\r\n      </NavLink>\r\n    </div>\r\n  );\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"mainSection\":\"Section_mainSection__2s6RO\"};","import { createReducer } from \"@reduxjs/toolkit\";\r\nimport { combineReducers } from \"redux\";\r\nimport { filterContact } from \"./actions\";\r\nimport { fetchContacts, addContacts, removeContact } from \"./operations\";\r\n\r\nconst getContacts = createReducer([], {\r\n  [fetchContacts.fulfilled]: (state, action) => action.payload,\r\n\r\n  [addContacts.fulfilled]: (state, action) => [...state, action.payload],\r\n  [removeContact.fulfilled]: (state, action) =>\r\n    state.filter((el) => el.id !== action.payload),\r\n});\r\n\r\nconst error = createReducer(null, {\r\n  [fetchContacts.rejected]: (_, action) => action.payload,\r\n  [fetchContacts.pending]: () => null,\r\n  [addContacts.rejected]: (_, action) => action.payload,\r\n  [addContacts.pending]: () => null,\r\n  [removeContact.rejected]: (_, action) => action.payload,\r\n  [removeContact.pending]: () => null,\r\n});\r\n\r\nconst filter = createReducer(\"\", {\r\n  [filterContact]: (state, action) => action.payload,\r\n});\r\n\r\nexport default combineReducers({\r\n  contacts: getContacts,\r\n  filter,\r\n  error,\r\n});\r\n","import { createReducer } from \"@reduxjs/toolkit\";\nimport { combineReducers } from \"redux\";\nimport { register, logIn, logOut } from \"./authOperations\";\n\nconst registerNewUser = createReducer(null, {\n  [register.fulfilled]: (_, { payload }) => payload.user,\n  [logIn.fulfilled]: (_, { payload }) => payload.user,\n  [logOut.fulfilled]: () => null,\n});\n\nconst token = createReducer(null, {\n  [register.fulfilled]: (_, { payload }) => payload.token,\n  [logIn.fulfilled]: (_, { payload }) => payload.token,\n  [logOut.fulfilled]: () => null,\n});\n\nconst error = createReducer(null, {\n  [register.rejected]: (_, { payload }) => payload,\n  [register.pending]: () => null,\n  [logIn.rejected]: (_, { payload }) => payload,\n  [logIn.pending]: () => null,\n  [logOut.rejected]: (_, action) => action.payload,\n  [logOut.pending]: () => null,\n});\n\nconst isLoggedIn = createReducer(false, {\n  [register.fulfilled]: () => true,\n  [logIn.fulfilled]: () => true,\n  [logOut.fulfilled]: () => false,\n});\n\nexport default combineReducers({\n  user: registerNewUser,\n  token,\n  error,\n  isLoggedIn,\n});\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport contactsReduser from \"./phonebook/reducer\";\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from \"redux-persist\";\nimport storage from \"redux-persist/lib/storage\";\nimport authReducer from \"./auth/authReducer\";\n\nconst authPersistConfig = {\n  key: \"auth\",\n  storage,\n  whitelist: [\"token\"],\n};\n\nconst persistedReducer = persistReducer(authPersistConfig, authReducer);\n\nconst store = configureStore({\n  reducer: {\n    auth: persistedReducer,\n    contacts: contactsReduser,\n  },\n\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n      },\n    }),\n});\n\nconst persistor = persistStore(store);\n\nexport { store, persistor };\n","import { useSelector, useDispatch } from \"react-redux\";\r\nimport { logOut } from \"../../redux/auth/authOperations\";\r\nimport { getUserEmail } from \"../../redux/auth/authSelector\";\r\nimport styles from \"./UserMenu.module.css\";\r\n\r\nimport { Button } from \"@material-ui/core\";\r\n\r\nconst UserMenu = () => {\r\n  const dispatch = useDispatch();\r\n  const email = useSelector(getUserEmail);\r\n\r\n  return (\r\n    <div className={styles.userMenu}>\r\n      <p className={styles.text}>Welcome,</p>\r\n      <p className={styles.mail}>{email}</p>\r\n      <Button\r\n              variant=\"contained\"\r\n        type=\"button\"\r\n        onClick={() => dispatch(logOut())}\r\n      >\r\n        Exit\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserMenu;\r\n","import { useSelector } from 'react-redux';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Box from '@material-ui/core/Box';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\n\r\nimport UserMenu from '../UserMenu/UserMenu';\r\nimport AuthNav from '../AuthNav/AuthNav';\r\n\r\nimport { getIsLoggedIn } from '../../redux/auth/authSelector';\r\nimport styles from './Nav.module.css';\r\n\r\nexport default function Nav () {\r\n  const isLoggedIn = useSelector(getIsLoggedIn);\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <Box sx={{ flexGrow: 1 }}>\r\n        <AppBar position=\"fixed\">\r\n          <Toolbar>\r\n            <nav className={styles.nav}>\r\n              <NavLink\r\n                to=\"/\"\r\n                exact\r\n                className={styles.link}\r\n                activeClassName=\"activeLink\"\r\n              >\r\n                Home\r\n              </NavLink>\r\n\r\n              {isLoggedIn && (\r\n                <NavLink\r\n                  to=\"/contacts\"\r\n                  exact\r\n                  className={styles.link}\r\n                  activeClassName=\"activeLink\"\r\n                >\r\n                  Contacts\r\n                </NavLink>\r\n               )} \r\n            </nav>\r\n            {isLoggedIn ? <UserMenu /> : <AuthNav />}\r\n\r\n          </Toolbar>\r\n        </AppBar>\r\n      </Box>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import { Switch, Redirect, Route } from \"react-router-dom\";\r\nimport { useEffect,Suspense, lazy } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Copyright } from '@material-ui/icons';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport Loader from 'react-loader-spinner';\r\n\r\nimport Nav from '../Nav/Nav'\r\nimport Section from \"../Section/Section\"\r\nimport {getIsLoggedIn} from '../../redux/auth/authSelector'\r\nimport styles from \"./App.module.css\"\r\n\r\n\r\n\r\nconst HomePage = lazy(() =>\r\n  import('../page/HomePage' /* webpackChunkName: \"home\" */),\r\n);\r\nconst AuthPage = lazy(() =>\r\n  import('../page/AuthPage' /* webpackChunkName: \"auth\" */),\r\n);\r\nconst LoginPage = lazy(() =>\r\n  import('../page/LoginPage' /* webpackChunkName: \"login\" */),\r\n);\r\nconst ContactsPage = lazy(() =>\r\n  import('../page/ContactsPage' /* webpackChunkName: \"contacts\" */),\r\n);\r\n\r\n\r\n\r\nexport default function App() {\r\n\r\n  const isLoggedIn = useSelector(getIsLoggedIn);\r\n  // const dispatch = useDispatch();\r\n  // const isError = useSelector(getErrorStatus);\r\n\r\n  // useEffect(() => {\r\n  //   dispatch(currentUser());\r\n  // }, [dispatch]);\r\n\r\n  return (\r\n    <Section className={styles.sectionApp}>\r\n       <ToastContainer autoClose={2000} />\r\n      <Nav />\r\n\r\n       <div className=\"viewContainer\">\r\n          <Suspense\r\n            fallback={\r\n              <Loader type=\"Circles\" color=\"#00BFFF\" height={80} width={80} />\r\n            }\r\n          >\r\n            <Switch>\r\n\r\n              <Route path=\"/\" exact>\r\n                <HomePage />\r\n              </Route>\r\n        \r\n              <Route path=\"/login\" restricted>\r\n                <LoginPage />\r\n              </Route>\r\n\r\n              <Route path=\"/register\" restricted>\r\n                <AuthPage />\r\n              </Route>\r\n\r\n              <Route path=\"/contacts\">\r\n                <ContactsPage />\r\n              </Route>\r\n\r\n            </Switch>\r\n            {isLoggedIn ? <Redirect to=\"/contacts\" /> : <Redirect to=\"/\" />}\r\n          </Suspense>\r\n      </div>\r\n\r\n      <div className={styles.footer}>\r\n        <Copyright  />\r\n        Created by Suslov | 2021\r\n      </div>\r\n    \r\n    </Section>\r\n  );\r\n}","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { PersistGate } from \"reduxjs-toolkit-persist/integration/react\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nimport { Provider } from \"react-redux\";\nimport { store, persistor } from \"./redux/store\";\n\nimport App from \"./components/App/App\";\nimport \"./index.css\";\nimport \"modern-normalize/modern-normalize.css\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate loading={null} persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n","import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport {\r\n  getContacts,\r\n  addContactRequest,\r\n  deleteContactRequest,\r\n} from \"../../services/api-request\";\r\n\r\nconst fetchContacts = createAsyncThunk(\r\n  \"contact/fetchContacts\",\r\n  async function (_, { rejectWithValue }) {\r\n    try {\r\n      const contacts = await getContacts();\r\n      return contacts;\r\n    } catch (error) {\r\n      console.error(error.message);\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nconst addContacts = createAsyncThunk(\r\n  \"contact/add\",\r\n  async function (newObject, { rejectWithValue }) {\r\n    try {\r\n      const contacts = await addContactRequest(newObject);\r\n      return contacts;\r\n    } catch (error) {\r\n      console.error(error.message);\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\n\r\nconst removeContact = createAsyncThunk(\r\n  \"contact/delete\",\r\n  async function (id, { rejectWithValue }) {\r\n    try {\r\n      return await deleteContactRequest(id);\r\n    } catch (error) {\r\n      console.error(error.message);\r\n      // console.log(error.data);\r\n      return rejectWithValue(error.message);\r\n    }\r\n  }\r\n);\r\nexport { fetchContacts, addContacts, removeContact };\r\n","import axios from \"axios\";\n\naxios.defaults.baseURL = \"https://connections-api.herokuapp.com\";\n\nconst token = {\n  set(token) {\n    axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n  },\n  unset(token) {\n    axios.defaults.headers.common.Authorization = \"\";\n  },\n};\n\nexport async function getContacts() {\n  try {\n    const { data } = await axios.get(\"/contacts\");\n    console.log(\"getContacts\", data);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function addContactRequest(newContact) {\n  try {\n    const { data } = await axios.post(\"/contacts\", newContact);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function deleteContactRequest(id) {\n  try {\n    await axios.delete(`/contacts/${id}`);\n    return id;\n  } catch (error) {\n    throw error;\n  }\n}\n\nexport async function registerNewUser(userData) {\n  try {\n    const { data } = await axios.post(\"/users/signup\", userData);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\nexport async function loginUser(userData) {\n  try {\n    const { data } = await axios.post(\"/users/login\", userData);\n    token.set(data.token);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\nexport async function logOutUser() {\n  try {\n    const { data } = await axios.post(\"/users/logout\");\n    token.unset();\n    // console.log(\"registerNewUser\", userData);\n    return data;\n  } catch (error) {\n    throw error;\n  }\n}\n\n// import axios from 'axios';\n\n// axios.defaults.baseURL = 'https://connections-api.herokuapp.com';\n\n// const token = {\n//   set(token) {\n//     axios.defaults.headers.common.Authorization = `Bearer ${token}`;\n//   },\n//   unset(token) {\n//     axios.defaults.headers.common.Authorization = '';\n//   },\n// };\n\n// const getContacts = () => {\n//   return axios.get('/contacts').then(({ data }) => data);\n// };\n\n// const addContact = contact => {\n//   return axios.post('/contacts', contact).then(({ data }) => data);\n// };\n\n// const deleteContact = id => {\n//   return axios.delete(`/contacts/${id}`);\n// };\n\n// const editContact = ({ id, name, number }) => {\n//   return axios\n//     .patch(`/contacts/${id}`, { name, number })\n//     .then(({ data }) => data);\n// };\n\n// const registerNewUser = async credentials => {\n//   return axios.post('/users/signup', credentials).then(({ data }) => {\n//     token.set(data.token);\n//     return data;\n//   });\n// };\n\n// const loginUser = credentials => {\n//   return axios.post('/users/login', credentials).then(({ data }) => {\n//     token.set(data.token);\n//     return data;\n//   });\n// };\n\n// const getCurrentUser = persistToken => {\n//   token.set(persistToken);\n//   return axios.get('/users/current').then(({ data }) => {\n//     return data;\n//   });\n// };\n\n// const logOutUser = () => {\n//   axios.post('/users/logout');\n//   token.unset();\n// };\n\n// const phoneBookApi = {\n//   getContacts,\n//   addContact,\n//   deleteContact,\n//   editContact,\n//   registerNewUser,\n//   loginUser,\n//   getCurrentUser,\n//   logOutUser,\n// };\n// export default phoneBookApi;\n","const getIsLoggedIn = (state) => state.auth.isLoggedIn;\n\nconst getUserEmail = (state) => state.auth.user.email;\n\nconst getToken = (state) => state.auth.token;\n\nconst getAuthError = (state) => state.auth.error;\n\n// const getIsGetCurrentUser = (state) => state.auth.isGetCurrentUser;\n\nexport { getIsLoggedIn, getUserEmail, getToken, getAuthError };\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Nav_nav__3HYI7\",\"link\":\"Nav_link__1LGxt\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userMenu\":\"UserMenu_userMenu__in_tB\",\"text\":\"UserMenu_text__3uchB\",\"mail\":\"UserMenu_mail__zw92E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"link\":\"AuthNav_link__qMMtQ\"};"],"sourceRoot":""}